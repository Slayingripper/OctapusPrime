<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OctapusPrime – Updates & Releases</title>
  <style>
    /* ===== CSS Custom Properties ===== */
    :root {
      --primary-bg: #0d0d0d;
      --secondary-bg: #1a1a1a;
      --tertiary-bg: #262626;
      --primary-text: #e6e6e6;
      --secondary-text: #bbb;
      --accent-color: #39ff14;
      --accent-shadow: 0 0 8px #39ff14;
      --border-color: #333;
      --font-mono: "Roboto Mono", "Courier New", monospace;
      --transition: all 0.3s ease;
      --glow-box-shadow: 0 0 12px rgba(57, 255, 20, 0.3);
      --warning-color: #ff9500;
      --error-color: #ff4444;
      --success-color: #00ff88;
    }

    /* ===== Reset & Base Styles ===== */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      background: linear-gradient(135deg, var(--primary-bg) 0%, #0a0a0a 100%);
      color: var(--primary-text);
      font-family: var(--font-mono);
      line-height: 1.6;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }

    /* ===== Animated Background Grid ===== */
    .background-grid {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: 
        linear-gradient(rgba(57, 255, 20, 0.05) 1px, transparent 1px),
        linear-gradient(90deg, rgba(57, 255, 20, 0.05) 1px, transparent 1px);
      background-size: 40px 40px;
      animation: gridFlow 30s linear infinite;
      z-index: 1;
    }

    @keyframes gridFlow {
      0% { transform: translate(0, 0); }
      100% { transform: translate(40px, 40px); }
    }

    /* ===== Navigation ===== */
    .nav-back {
      position: fixed;
      top: 20px;
      left: 20px;
      padding: 12px 20px;
      background: var(--secondary-bg);
      border: 1px solid var(--border-color);
      border-radius: 25px;
      color: var(--accent-color);
      text-decoration: none;
      font-size: 14px;
      font-weight: bold;
      transition: var(--transition);
      z-index: 1000;
      box-shadow: var(--glow-box-shadow);
    }

    .nav-back:hover {
      background: var(--tertiary-bg);
      box-shadow: var(--accent-shadow);
      transform: translateX(-3px);
    }

    /* ===== Header ===== */
    .header {
      text-align: center;
      padding: 120px 20px 60px;
      position: relative;
      z-index: 10;
    }

    .header h1 {
      font-size: clamp(2.5rem, 5vw, 3.5rem);
      color: var(--accent-color);
      text-shadow: var(--accent-shadow);
      margin-bottom: 20px;
      animation: titleGlow 3s ease-in-out infinite alternate;
    }

    @keyframes titleGlow {
      0% { text-shadow: 0 0 20px var(--accent-color); }
      100% { text-shadow: 0 0 30px var(--accent-color), 0 0 40px var(--accent-color); }
    }

    .subtitle {
      font-size: 1.1rem;
      color: var(--secondary-text);
      max-width: 600px;
      margin: 0 auto;
    }

    /* ===== Main Content ===== */
    .main-content {
      position: relative;
      z-index: 10;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px 60px;
    }

    /* ===== GitHub Integration Section ===== */
    .github-section {
      background: var(--secondary-bg);
      border: 1px solid var(--border-color);
      border-radius: 15px;
      padding: 30px;
      margin-bottom: 40px;
      box-shadow: var(--glow-box-shadow);
    }

    .github-header {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 20px;
    }

    .github-icon {
      width: 32px;
      height: 32px;
      fill: var(--accent-color);
    }

    .github-title {
      font-size: 1.5rem;
      color: var(--accent-color);
      margin: 0;
    }

    .github-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 20px;
      background: var(--tertiary-bg);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      color: var(--accent-color);
      text-decoration: none;
      font-size: 14px;
      transition: var(--transition);
    }

    .github-link:hover {
      background: var(--accent-color);
      color: var(--primary-bg);
      box-shadow: var(--accent-shadow);
    }

    /* ===== Loading Indicator ===== */
    .loading {
      text-align: center;
      padding: 40px;
      color: var(--secondary-text);
    }

    .spinner {
      width: 40px;
      height: 40px;
      border: 3px solid var(--border-color);
      border-top: 3px solid var(--accent-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* ===== Release Cards ===== */
    .releases-container {
      display: grid;
      gap: 25px;
    }

    .release-card {
      background: var(--secondary-bg);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      padding: 25px;
      transition: var(--transition);
      position: relative;
      overflow: hidden;
    }

    .release-card:hover {
      border-color: var(--accent-color);
      box-shadow: var(--glow-box-shadow);
      transform: translateY(-2px);
    }

    .release-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 4px;
      height: 100%;
      background: var(--accent-color);
      opacity: 0;
      transition: var(--transition);
    }

    .release-card:hover::before {
      opacity: 1;
    }

    .release-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 15px;
      flex-wrap: wrap;
      gap: 10px;
    }

    .release-version {
      font-size: 1.3rem;
      color: var(--accent-color);
      font-weight: bold;
      margin: 0;
    }

    .release-date {
      color: var(--secondary-text);
      font-size: 0.9rem;
      background: var(--tertiary-bg);
      padding: 4px 12px;
      border-radius: 15px;
      border: 1px solid var(--border-color);
    }

    .release-tag {
      display: inline-block;
      background: var(--accent-color);
      color: var(--primary-bg);
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 0.8rem;
      font-weight: bold;
      margin-left: 10px;
    }

    .release-tag.pre-release {
      background: var(--warning-color);
    }

    .release-description {
      color: var(--primary-text);
      margin-bottom: 15px;
      line-height: 1.6;
    }

    .release-changes {
      margin-top: 15px;
    }

    .changes-title {
      color: var(--accent-color);
      font-size: 1rem;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .changes-list {
      list-style: none;
      padding-left: 0;
    }

    .changes-list li {
      padding: 5px 0;
      padding-left: 20px;
      position: relative;
      color: var(--secondary-text);
    }

    .changes-list li::before {
      content: "▸";
      position: absolute;
      left: 0;
      color: var(--accent-color);
      font-weight: bold;
    }

    /* ===== Download Links ===== */
    .download-links {
      display: flex;
      gap: 10px;
      margin-top: 15px;
      flex-wrap: wrap;
    }

    .download-btn {
      padding: 8px 16px;
      background: var(--tertiary-bg);
      border: 1px solid var(--border-color);
      border-radius: 6px;
      color: var(--accent-color);
      text-decoration: none;
      font-size: 0.9rem;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .download-btn:hover {
      background: var(--accent-color);
      color: var(--primary-bg);
    }

    /* ===== Fallback Content ===== */
    .fallback-updates {
      background: var(--secondary-bg);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      padding: 30px;
      margin-top: 30px;
    }

    .fallback-title {
      color: var(--accent-color);
      font-size: 1.3rem;
      margin-bottom: 20px;
    }

    .update-list {
      list-style: none;
      padding: 0;
    }

    .update-list li {
      padding: 12px 0;
      border-bottom: 1px solid var(--border-color);
      position: relative;
      padding-left: 25px;
    }

    .update-list li:last-child {
      border-bottom: none;
    }

    .update-list li::before {
      content: "●";
      position: absolute;
      left: 0;
      color: var(--accent-color);
      font-size: 1.2rem;
    }

    /* ===== Error State ===== */
    .error-message {
      background: rgba(255, 68, 68, 0.1);
      border: 1px solid var(--error-color);
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
      color: var(--error-color);
      text-align: center;
    }

    /* ===== Responsive Design ===== */
    @media (max-width: 768px) {
      .header {
        padding: 100px 20px 40px;
      }

      .main-content {
        padding: 0 15px 40px;
      }

      .github-section {
        padding: 20px;
      }

      .release-header {
        flex-direction: column;
        align-items: flex-start;
      }

      .download-links {
        flex-direction: column;
      }
    }

    @media (max-width: 480px) {
      .nav-back {
        top: 15px;
        left: 15px;
        padding: 10px 16px;
        font-size: 13px;
      }

      .header h1 {
        font-size: 2rem;
      }

      .subtitle {
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>
  <!-- Animated Background -->
  <div class="background-grid"></div>

  <!-- Navigation -->
  <a href="/" class="nav-back">← Back to Home</a>

  <!-- Header -->
  <header class="header">
    <h1>Updates & Releases</h1>
    <p class="subtitle">Latest news, version releases, and patch notes for OctapusPrime</p>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <!-- GitHub Integration Section -->
    <section class="github-section">
      <div class="github-header">
        <svg class="github-icon" viewBox="0 0 24 24">
          <path d="M12 0C5.37 0 0 5.37 0 12c0 5.3 3.44 9.8 8.2 11.39.6.11.82-.26.82-.58v-2.03c-3.34.73-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.1-.75.08-.73.08-.73 1.21.09 1.85 1.25 1.85 1.25 1.08 1.85 2.83 1.31 3.52 1 .11-.78.42-1.31.77-1.61-2.67-.3-5.47-1.34-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.12-.3-.54-1.52.12-3.18 0 0 1.01-.32 3.3 1.23.96-.27 1.98-.4 3-.41 1.02.01 2.04.14 3 .41 2.29-1.55 3.3-1.23 3.3-1.23.66 1.66.24 2.88.12 3.18.77.84 1.24 1.91 1.24 3.22 0 4.61-2.8 5.63-5.48 5.92.43.37.81 1.1.81 2.22v3.29c0 .32.22.69.82.58C20.56 21.8 24 17.3 24 12 24 5.37 18.63 0 12 0z"/>
        </svg>
        <h2 class="github-title">GitHub Releases</h2>
      </div>
      <p>Get the latest releases directly from our GitHub repository:</p>
      <a href="https://github.com/Slayingripper/OctapusPrime/releases" class="github-link" target="_blank" rel="noopener">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 0C5.37 0 0 5.37 0 12c0 5.3 3.44 9.8 8.2 11.39.6.11.82-.26.82-.58v-2.03c-3.34.73-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.1-.75.08-.73.08-.73 1.21.09 1.85 1.25 1.85 1.25 1.08 1.85 2.83 1.31 3.52 1 .11-.78.42-1.31.77-1.61-2.67-.3-5.47-1.34-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.12-.3-.54-1.52.12-3.18 0 0 1.01-.32 3.3 1.23.96-.27 1.98-.4 3-.41 1.02.01 2.04.14 3 .41 2.29-1.55 3.3-1.23 3.3-1.23.66 1.66.24 2.88.12 3.18.77.84 1.24 1.91 1.24 3.22 0 4.61-2.8 5.63-5.48 5.92.43.37.81 1.1.81 2.22v3.29c0 .32.22.69.82.58C20.56 21.8 24 17.3 24 12 24 5.37 18.63 0 12 0z"/>
        </svg>
        View All Releases
      </a>
    </section>

    <!-- Releases Container -->
    <div id="releases-container" class="releases-container">
      <!-- Loading State -->
      <div id="loading" class="loading">
        <div class="spinner"></div>
        <p>Loading latest releases from GitHub...</p>
      </div>
    </div>

    <!-- Fallback Content -->
    <section class="fallback-updates" id="fallback-content" style="display: none;">
      <h2 class="fallback-title">Recent Updates</h2>
      <ul class="update-list">
        <li><strong>v1.2.0</strong> – New "Scenario Maker" page with IF-THEN logic (2025-06-01)</li>
        <li><strong>v1.1.3</strong> – Added Hydra SSH + FTP brute-force in dynamic scans (2025-05-15)</li>
        <li><strong>v1.1.0</strong> – Initial public release with Nmap + Masscan + Gobuster pipelines (2025-05-01)</li>
      </ul>
    </section>
  </main>

  <script>
    // GitHub API integration
    async function loadGitHubReleases() {
      const loadingElement = document.getElementById('loading');
      const releasesContainer = document.getElementById('releases-container');
      const fallbackContent = document.getElementById('fallback-content');

      try {
        const response = await fetch('https://api.github.com/repos/Slayingripper/OctapusPrime/releases');
        
        if (!response.ok) {
          throw new Error(`HTTP ${response.status}`);
        }

        const releases = await response.json();
        
        // Hide loading
        loadingElement.style.display = 'none';

        if (releases.length === 0) {
          showFallback();
          return;
        }

        // Display releases
        releases.slice(0, 10).forEach(release => {
          const releaseCard = createReleaseCard(release);
          releasesContainer.appendChild(releaseCard);
        });

      } catch (error) {
        console.error('Failed to load GitHub releases:', error);
        loadingElement.innerHTML = `
          <div class="error-message">
            <p>⚠️ Failed to load releases from GitHub</p>
            <p style="font-size: 0.9rem; margin-top: 10px;">Error: ${error.message}</p>
          </div>
        `;
        showFallback();
      }
    }

    function createReleaseCard(release) {
      const card = document.createElement('div');
      card.className = 'release-card';

      const publishedDate = new Date(release.published_at).toLocaleDateString('en-US', {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      });

      const changes = parseReleaseBody(release.body);

      card.innerHTML = `
        <div class="release-header">
          <div>
            <h3 class="release-version">${release.name || release.tag_name}</h3>
            ${release.prerelease ? '<span class="release-tag pre-release">Pre-release</span>' : ''}
            ${release.draft ? '<span class="release-tag">Draft</span>' : ''}
          </div>
          <span class="release-date">${publishedDate}</span>
        </div>
        
        ${release.body ? `<div class="release-description">${formatReleaseDescription(release.body)}</div>` : ''}
        
        ${changes.length > 0 ? `
          <div class="release-changes">
            <h4 class="changes-title">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
              </svg>
              What's New
            </h4>
            <ul class="changes-list">
              ${changes.map(change => `<li>${change}</li>`).join('')}
            </ul>
          </div>
        ` : ''}
        
        ${release.assets && release.assets.length > 0 ? `
          <div class="download-links">
            ${release.assets.map(asset => `
              <a href="${asset.browser_download_url}" class="download-btn" target="_blank">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                </svg>
                ${asset.name}
              </a>
            `).join('')}
          </div>
        ` : ''}
        
        <div class="download-links" style="margin-top: 10px;">
          <a href="${release.html_url}" class="download-btn" target="_blank">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 0C5.37 0 0 5.37 0 12c0 5.3 3.44 9.8 8.2 11.39.6.11.82-.26.82-.58v-2.03c-3.34.73-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.1-.75.08-.73.08-.73 1.21.09 1.85 1.25 1.85 1.25 1.08 1.85 2.83 1.31 3.52 1 .11-.78.42-1.31.77-1.61-2.67-.3-5.47-1.34-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.12-.3-.54-1.52.12-3.18 0 0 1.01-.32 3.3 1.23.96-.27 1.98-.4 3-.41 1.02.01 2.04.14 3 .41 2.29-1.55 3.3-1.23 3.3-1.23.66 1.66.24 2.88.12 3.18.77.84 1.24 1.91 1.24 3.22 0 4.61-2.8 5.63-5.48 5.92.43.37.81 1.1.81 2.22v3.29c0 .32.22.69.82.58C20.56 21.8 24 17.3 24 12 24 5.37 18.63 0 12 0z"/>
            </svg>
            View on GitHub
          </a>
        </div>
      `;

      return card;
    }

    function parseReleaseBody(body) {
      if (!body) return [];
      
      // Extract bullet points, features, or numbered lists
      const lines = body.split('\n');
      const changes = [];
      
      for (let line of lines) {
        line = line.trim();
        // Match various list formats
        if (line.match(/^[-*+]\s+/) || line.match(/^\d+\.\s+/) || line.match(/^▸\s+/)) {
          changes.push(line.replace(/^[-*+▸]\s+|^\d+\.\s+/, ''));
        }
      }
      
      return changes.slice(0, 10); // Limit to 10 items
    }

    function formatReleaseDescription(body) {
      if (!body) return '';
      
      // Basic markdown-like formatting
      return body
        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
        .replace(/\*(.*?)\*/g, '<em>$1</em>')
        .replace(/`(.*?)`/g, '<code style="background: var(--tertiary-bg); padding: 2px 6px; border-radius: 4px;">$1</code>')
        .split('\n')
        .slice(0, 3) // First 3 lines only
        .join('<br>')
        .substring(0, 300) + (body.length > 300 ? '...' : '');
    }

    function showFallback() {
      document.getElementById('fallback-content').style.display = 'block';
    }

    // Load releases on page load
    document.addEventListener('DOMContentLoaded', loadGitHubReleases);
  </script>
</body>
</html>
