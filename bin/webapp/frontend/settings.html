<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OctapusPrime ‚Äì Settings</title>
  <link rel="stylesheet" href="../static/css/settings.css">
</head>
<body>
  <!-- Header Section -->
  <header class="header">
    <a href="/" class="back-link">‚Üê Back to Home</a>
    <div style="text-align: center; flex: 1;">
      <h1 class="page-title">SYSTEM SETTINGS</h1>
      <div class="header-subtitle">Configure network, GPIO and hardware settings</div>
    </div>
    <div class="status-indicator">
      <div class="status-dot" id="connectionDot"></div>
      <span id="connectionText">Ready</span>
    </div>
  </header>

  <!-- Main Container -->
  <div class="container">
    <!-- Alert Section -->
    <div id="alert" class="alert"></div>

    <!-- Settings Grid -->
    <div class="settings-grid">
      <!-- Network Configuration Section -->
      <div class="section">
        <h2>üåê Network Configuration</h2>
        
        <div class="form-group">
          <div class="checkbox-group">
            <input type="checkbox" id="auto-detect-network" checked>
            <label for="auto-detect-network">Auto-detect network interface</label>
          </div>
          <div class="form-help">Automatically detect the best network interface for scanning</div>
        </div>
        
        <div class="form-group">
          <label for="network-interface">Network Interface:</label>
          <select id="network-interface" class="form-control">
            <option value="auto">Auto-detect</option>
          </select>
          <div class="form-help">Select the network interface to use for scanning</div>
        </div>
        
        <div class="form-group">
          <label for="custom-cidr">Custom CIDR (optional):</label>
          <input type="text" id="custom-cidr" class="form-control" placeholder="e.g., 192.168.1.0/24">
          <div class="form-help">Override auto-detected network range with custom CIDR</div>
        </div>

        <h3>Available Network Interfaces</h3>
        <div id="interface-list" class="interface-list">
          <div class="loading">Loading interfaces...</div>
        </div>

        <h3>Scan Configuration</h3>
        
        <div class="form-group">
          <label for="nmap-scan-type">Default Nmap Scan Type:</label>
          <select id="nmap-scan-type" class="form-control">
            <option value="quick">Quick Scan (-T4 -F)</option>
            <option value="intense">Intense Scan (-T4 -A -v)</option>
            <option value="comprehensive">Comprehensive Scan (-sS -sU -T4 -A -v)</option>
            <option value="stealth">Stealth Scan (-sS -T1)</option>
            <option value="custom">Custom</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="default-scan-ports">Default Port Range:</label>
          <input type="text" id="default-scan-ports" class="form-control" value="1-1000" placeholder="e.g., 1-1000, 80,443,8080">
          <div class="form-help">Default ports to scan (ranges or comma-separated)</div>
        </div>
        
        <div class="form-group">
          <label for="masscan-rate">Masscan Rate (packets/sec):</label>
          <input type="number" id="masscan-rate" class="form-control" value="1000" min="100" max="100000">
          <div class="form-help">Packet transmission rate for Masscan (higher = faster but more aggressive)</div>
        </div>
        
        <div class="form-group">
          <label for="thread-count">Default Thread Count:</label>
          <input type="number" id="thread-count" class="form-control" value="10" min="1" max="100">
          <div class="form-help">Number of concurrent threads for tools that support it</div>
        </div>

        <div class="button-group">
          <button id="test-network-btn" class="btn btn-secondary">üîç Test Network</button>
        </div>
      </div>

      <!-- Platform Information Section -->
      <div class="section">
        <h2>üíª Platform Information</h2>
        <div class="platform-info">
          <div class="platform-row">
            <span class="platform-label">Detected Platform:</span>
            <span id="platform-name" class="platform-value loading">Loading...</span>
          </div>
          <div class="platform-row">
            <span class="platform-label">Model:</span>
            <span id="platform-model" class="platform-value loading">Loading...</span>
          </div>
          <div class="platform-row">
            <span class="platform-label">Recommended Library:</span>
            <span id="recommended-lib" class="platform-value loading">Loading...</span>
          </div>
        </div>
        
        <h3>Available GPIO Libraries</h3>
        <div id="library-status" class="library-status">
          <div class="loading">Loading libraries...</div>
        </div>
      </div>

      <!-- GPIO Configuration Section -->
      <div class="section">
        <h2>‚ö° GPIO Configuration</h2>
        
        <div class="form-group">
          <div class="checkbox-group">
            <input type="checkbox" id="auto-detect" checked>
            <label for="auto-detect">Auto-detect GPIO library (recommended)</label>
          </div>
          <div class="form-help">Automatically select the best GPIO library for your platform</div>
        </div>
        
        <div class="form-group">
          <div class="checkbox-group">
            <input type="checkbox" id="manual-override">
            <label for="manual-override">Manual override GPIO settings</label>
          </div>
          <div class="form-help">Override auto-detection and use custom GPIO configuration</div>
        </div>
        
        <div id="manual-config" class="manual-config hidden">
          <div class="form-group">
            <label for="gpio-library">GPIO Library:</label>
            <select id="gpio-library" class="form-control">
              <option value="auto">Auto-detect</option>
              <option value="gpiozero">gpiozero (Raspberry Pi)</option>
              <option value="RPi.GPIO">RPi.GPIO (Raspberry Pi)</option>
              <option value="OPi.GPIO">OPi.GPIO (Orange Pi / Nano Pi)</option>
              <option value="libgpiod">libgpiod (Generic Linux)</option>
              <option value="lgpio">lgpio (Modern Raspberry Pi)</option>
              <option value="wiringpi">wiringpi (Legacy)</option>
            </select>
            <div class="form-help">Select the GPIO library for your platform</div>
          </div>
        </div>
        
        <div class="form-group">
          <label for="button-pin">Button GPIO Pin:</label>
          <input type="number" id="button-pin" class="form-control" min="0" max="40" value="17">
          <div class="form-help">GPIO pin number for the trigger button (default: 17)</div>
        </div>
        
        <div class="form-group">
          <label for="led-pin">LED GPIO Pin:</label>
          <input type="number" id="led-pin" class="form-control" min="0" max="40" value="27">
          <div class="form-help">GPIO pin number for the status LED (default: 27)</div>
        </div>
        
        <div class="form-group">
          <div class="checkbox-group">
            <input type="checkbox" id="button-pull-up" checked>
            <label for="button-pull-up">Button pull-up resistor</label>
          </div>
          <div class="form-help">Enable internal pull-up resistor for button (recommended)</div>
        </div>
        
        <div class="form-group">
          <label for="bounce-time">Button bounce time (seconds):</label>
          <input type="number" id="bounce-time" class="form-control" step="0.01" min="0" max="1" value="0.1">
          <div class="form-help">Debounce time to prevent multiple triggers (default: 0.1s)</div>
        </div>
        
        <div class="form-group">
          <div class="checkbox-group">
            <input type="checkbox" id="led-active-high" checked>
            <label for="led-active-high">LED active high</label>
          </div>
          <div class="form-help">LED turns on with high signal (uncheck for active low)</div>
        </div>
        
        <div class="button-group">
          <button id="test-gpio-btn" class="btn btn-warning">‚ö° Test GPIO</button>
          <button id="save-gpio-btn" class="btn btn-primary">üíæ Save GPIO Config</button>
        </div>
      </div>

      <!-- System Configuration Section -->
      <div class="section">
        <h2>‚öôÔ∏è System Configuration</h2>
        
        <div class="form-group">
          <label for="log-verbosity">Log Verbosity:</label>
          <select id="log-verbosity" class="form-control">
            <option value="debug">Debug</option>
            <option value="info">Info</option>
            <option value="warning">Warning</option>
            <option value="error">Error</option>
          </select>
          <div class="form-help">Set the minimum log level to display</div>
        </div>

        <div class="form-group">
          <label for="auto-update">Auto-update Tools:</label>
          <div class="checkbox-group">
            <input type="checkbox" id="auto-update">
            <label for="auto-update">Enable automatic tool updates</label>
          </div>
          <div class="form-help">Automatically update security tools when available</div>
        </div>

        <div class="form-group">
          <label for="scan-timeout">Default Scan Timeout (minutes):</label>
          <input type="number" id="scan-timeout" class="form-control" value="30" min="1" max="180">
          <div class="form-help">Maximum time to wait for scan completion</div>
        </div>
        
        <div class="button-group">
          <button id="save-settings-btn" class="btn btn-primary">üíæ Save All Settings</button>
          <button id="reset-btn" class="btn btn-danger">üîÑ Reset to Defaults</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Socket.IO for live functionality -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.0/socket.io.min.js"></script>
  <script src="../static/js/settings.js"></script>
</body>
</html>
